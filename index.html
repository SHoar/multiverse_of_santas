<!DOCTYPE html>
<html lang="en">
<head><script type='text/javascript' src='https://ppl-ai-code-interpreter-files.s3.amazonaws.com/SOZjcujJKd6xXXErtEmr0HDBGPtpeRwLjpEHqMH9lMS1rnXpPDsWtCCffOOVADyho1jTkLLZeWiI-mDIkwz0fe_ffaxtSfcoZHxHah1EsKOvNp-phySAioaTd5MK4NXOrgDSJLW7pd5T4UuSRo3kDb-aWxl-78zCl4CPukShuXo='></script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Multiverse of Santas</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Comic Sans MS', 'Arial Rounded MT Bold', cursive, sans-serif;
            background: linear-gradient(135deg, #001a4d 0%, #003d7a 50%, #0d47a1 100%);
            color: #f0f8ff;
            line-height: 1.6;
            overflow-x: hidden;
        }

        .container {
            width: 100%;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        .scene {
            width: 100%;
            min-height: 100vh;
            display: none;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 40px 20px;
            position: relative;
            overflow: hidden;
            animation: fadeIn 1s ease-in;
        }

        .scene.active {
            display: flex;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .snow {
            position: fixed;
            width: 10px;
            height: 10px;
            background: white;
            border-radius: 50%;
            opacity: 0.7;
            animation: snowfall linear infinite;
            pointer-events: none;
        }

        @keyframes snowfall {
            to { transform: translateY(100vh) translateX(var(--drift, 0px)); }
        }

        /* ===== OPENING SCENE ===== */
        .opening-scene {
            background: linear-gradient(180deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
            justify-content: space-around;
        }

        .hallway {
            width: 100%;
            height: 400px;
            position: relative;
            margin-bottom: 40px;
            background: linear-gradient(to right, #2a2a4e 0%, #3d3d6b 50%, #2a2a4e 100%);
            border-radius: 20px;
            overflow: hidden;
            box-shadow: 0 0 40px rgba(100, 150, 255, 0.5);
        }

        .sleigh {
            position: absolute;
            width: 200px;
            height: 80px;
            background: linear-gradient(135deg, #c41e3a 0%, #8b0000 100%);
            border-radius: 15px;
            left: -250px;
            top: 50%;
            transform: translateY(-50%);
            animation: sleighCrash 3s ease-out forwards;
            box-shadow: 0 0 30px rgba(196, 30, 58, 0.8);
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: visible;
        }

        .sleigh-santa {
            position: absolute;
            width: 140px;
            height: 160px;
            bottom: 10px;
            left: 50%;
            transform: translateX(-50%);
        }

        @keyframes sleighCrash {
            0% { left: -250px; transform: translateY(-50%) rotateZ(0deg); }
            80% { left: 20px; transform: translateY(-50%) rotateZ(-15deg); }
            100% { left: 20px; transform: translateY(-50%) rotateZ(-10deg); opacity: 1; }
        }

        .router-device {
            position: absolute;
            width: 60px;
            height: 60px;
            background: radial-gradient(circle, #ff00ff 0%, #0099ff 100%);
            border-radius: 50%;
            right: 10%;
            top: 20%;
            animation: deviceSpark 0.5s ease-out forwards;
            box-shadow: 0 0 20px #ff00ff, 0 0 40px #0099ff;
        }

        @keyframes deviceSpark {
            0% { transform: scale(0.5); opacity: 0; }
            100% { transform: scale(1); opacity: 1; }
        }

        .spark {
            position: absolute;
            width: 4px;
            height: 4px;
            background: #ffff00;
            border-radius: 50%;
            animation: sparkFly 1s ease-out forwards;
        }

        @keyframes sparkFly {
            to { transform: translate(var(--tx, 100px), var(--ty, 100px)); opacity: 0; }
        }

        .dialogue-box {
            background: rgba(30, 40, 80, 0.9);
            border: 3px solid #64b5f6;
            border-radius: 15px;
            padding: 20px;
            max-width: 600px;
            margin: 20px 0;
            font-size: 18px;
            text-align: center;
            animation: slideUp 0.8s ease-out;
            box-shadow: 0 0 20px rgba(100, 181, 246, 0.5);
        }

        .dialogue-characters {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin: 10px 0;
        }

        @keyframes slideUp {
            from { opacity: 0; transform: translateY(50px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .character-name {
            font-weight: bold;
            color: #ffeb3b;
            margin-bottom: 10px;
        }

        /* ===== CHARACTER DRAWING SYSTEM ===== */
        .character-container {
            position: relative;
            display: inline-block;
        }

        .character-svg {
            width: 100%;
            height: 100%;
            display: block;
        }

        /* Base animations */
        @keyframes breathe {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        @keyframes wave {
            0%, 100% { transform: rotate(0deg); }
            25% { transform: rotate(20deg); }
            75% { transform: rotate(-20deg); }
        }

        @keyframes frantic {
            0%, 100% { transform: translate(0, 0) rotate(0deg); }
            25% { transform: translate(-2px, -2px) rotate(-2deg); }
            50% { transform: translate(2px, -2px) rotate(2deg); }
            75% { transform: translate(-2px, 2px) rotate(-1deg); }
        }

        @keyframes rock {
            0%, 100% { transform: rotate(-2deg); }
            50% { transform: rotate(2deg); }
        }

        @keyframes excited {
            0%, 100% { transform: translateY(0) scale(1); }
            25% { transform: translateY(-8px) scale(1.1); }
            50% { transform: translateY(0) scale(1); }
            75% { transform: translateY(-8px) scale(1.1); }
        }

        @keyframes stealthSway {
            0%, 100% { transform: translateX(0) rotate(0deg); }
            50% { transform: translateX(5px) rotate(2deg); }
        }

        @keyframes paperShuffle {
            0%, 100% { transform: translateY(0) rotate(0deg); }
            25% { transform: translateY(-3px) rotate(-2deg); }
            75% { transform: translateY(-3px) rotate(2deg); }
        }

        @keyframes testTubeShake {
            0%, 100% { transform: rotate(0deg); }
            25% { transform: rotate(-10deg); }
            75% { transform: rotate(10deg); }
        }

        /* Prime Santa */
        .prime-santa {
            animation: frantic 1s ease-in-out infinite;
        }

        .prime-santa .santa-body {
            animation: breathe 2s ease-in-out infinite;
        }

        .prime-santa .santa-arm-left {
            animation: wave 0.6s ease-in-out infinite;
            transform-origin: top center;
        }

        .prime-santa .santa-arm-right {
            animation: wave 0.6s ease-in-out infinite 0.3s;
            transform-origin: top center;
        }

        /* Bureaucrat Santa */
        .bureaucrat-santa-svg {
            animation: paperShuffle 1.5s ease-in-out infinite;
        }

        .bureaucrat-santa-svg .santa-body {
            animation: breathe 2.5s ease-in-out infinite;
        }

        .bureaucrat-santa-svg .clipboard {
            animation: paperShuffle 1.2s ease-in-out infinite;
        }

        /* Ninja Santa */
        .ninja-santa-svg {
            animation: stealthSway 3s ease-in-out infinite;
        }

        .ninja-santa-svg .ninja-body {
            animation: breathe 3s ease-in-out infinite;
        }

        /* Scientist Santa */
        .scientist-santa {
            animation: excited 1s ease-in-out infinite;
        }

        .scientist-santa .santa-body {
            animation: breathe 2s ease-in-out infinite;
        }

        .scientist-santa .test-tube {
            animation: testTubeShake 0.8s ease-in-out infinite;
            transform-origin: bottom center;
        }

        /* Hannah & Margot */
        .hannah-character {
            animation: excited 1.2s ease-in-out infinite;
        }

        .hannah-character .girl-body {
            animation: breathe 2s ease-in-out infinite;
        }

        .hannah-character .girl-arm {
            animation: wave 0.8s ease-in-out infinite;
            transform-origin: top center;
        }

        .margot-character {
            animation: excited 1.2s ease-in-out infinite 0.3s;
        }

        .margot-character .girl-body {
            animation: breathe 2s ease-in-out infinite;
        }

        .margot-character .girl-arm {
            animation: wave 0.8s ease-in-out infinite 0.5s;
            transform-origin: top center;
        }

        /* Nana */
        .nana-svg {
            animation: rock 3s ease-in-out infinite;
        }

        .nana-svg .nana-body {
            animation: breathe 2.5s ease-in-out infinite;
        }

        /* Grandpa Scott Jack */
        .grandpa-svg {
            animation: rock 3s ease-in-out infinite 0.5s;
        }

        .grandpa-svg .grandpa-body {
            animation: breathe 2.5s ease-in-out infinite 0.3s;
        }

        /* Parent silhouettes */
        .parent-silhouette {
            animation: breathe 3s ease-in-out infinite;
        }

        @keyframes parentNod {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(2px); }
        }

        @keyframes parentSway {
            0%, 100% { transform: translateX(0); }
            50% { transform: translateX(2px); }
        }

        .parent-male {
            animation: parentNod 2s ease-in-out infinite, breathe 3s ease-in-out infinite;
        }

        .parent-female {
            animation: parentSway 2.5s ease-in-out infinite, breathe 3s ease-in-out infinite;
        }

        .parent-male .parent-head {
            animation: parentNod 2s ease-in-out infinite;
            transform-origin: center bottom;
        }

        .parent-female .parent-head {
            animation: parentSway 2.5s ease-in-out infinite;
            transform-origin: center bottom;
        }

        /* Stagger animations for natural feel */
        .dialogue-characters .parent-male:nth-child(1) {
            animation: parentNod 2s ease-in-out infinite, breathe 3s ease-in-out infinite;
        }

        .dialogue-characters .parent-male:nth-child(2) {
            animation: parentNod 2s ease-in-out infinite 0.5s, breathe 3s ease-in-out infinite 0.3s;
        }

        .dialogue-characters .parent-female:nth-child(1) {
            animation: parentSway 2.5s ease-in-out infinite, breathe 3s ease-in-out infinite;
        }

        .dialogue-characters .parent-female:nth-child(2) {
            animation: parentSway 2.5s ease-in-out infinite 0.5s, breathe 3s ease-in-out infinite 0.3s;
        }

        /* ===== DIMENSION SCENES ===== */
        .dimension-scene {
            width: 100%;
            max-width: 1000px;
            display: flex;
            flex-direction: column;
            gap: 30px;
        }

        .dimension-bg {
            width: 100%;
            height: 300px;
            border-radius: 20px;
            position: relative;
            overflow: hidden;
            margin-bottom: 20px;
            box-shadow: 0 0 40px rgba(100, 181, 246, 0.5);
        }

        .dimension-title {
            font-size: 48px;
            font-weight: bold;
            text-align: center;
            margin-bottom: 20px;
            text-shadow: 0 0 20px rgba(255, 255, 255, 0.5);
            animation: glow 2s ease-in-out infinite;
        }

        @keyframes glow {
            0%, 100% { text-shadow: 0 0 20px rgba(255, 255, 255, 0.5); }
            50% { text-shadow: 0 0 40px rgba(100, 181, 246, 1); }
        }

        /* ===== BUREAUCRACY DIMENSION ===== */
        .bureaucracy-bg {
            background: linear-gradient(135deg, #e8e8e8 0%, #d0d0d0 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
        }

        .form-stack {
            position: absolute;
            width: 80px;
            height: 60px;
            background: white;
            border: 2px solid #999;
            left: 10%;
            animation: formFloat 3s ease-in-out infinite;
        }

        .form-stack::before {
            content: '';
            position: absolute;
            width: 70px;
            height: 50px;
            background: #f5f5f5;
            border: 1px dashed #999;
            left: 5px;
            top: 8px;
        }

        @keyframes formFloat {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-20px); }
        }

        .bureaucrat-santa {
            width: 170px;
            height: 220px;
            position: relative;
            margin: 0 20px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .task-board {
            background: rgba(30, 40, 80, 0.9);
            border: 3px solid #64b5f6;
            border-radius: 15px;
            padding: 30px;
            margin: 20px 0;
        }

        .task-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            background: rgba(0, 0, 0, 0.3);
            padding: 15px;
            margin: 10px 0;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            min-height: 60px;
        }

        .task-item:hover {
            background: rgba(100, 181, 246, 0.3);
            transform: translateX(10px);
        }

        .task-item.completed {
            opacity: 0.5;
            text-decoration: line-through;
        }

        .checkbox {
            width: 30px;
            height: 30px;
            border: 2px solid #64b5f6;
            border-radius: 5px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            transition: all 0.3s ease;
        }

        .task-item.completed .checkbox {
            background: #64b5f6;
            content: '‚úì';
        }

        .task-item.completed .checkbox::after {
            content: '‚úì';
            color: white;
        }

        /* ===== NINJA DIMENSION ===== */
        .ninja-bg {
            background: linear-gradient(135deg, #3a3a3a 0%, #4d4d4d 100%);
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            padding: 20px;
            overflow-y: auto;
            max-height: calc(100vh - 300px);
        }

        .ninja-room {
            background: rgba(60, 60, 60, 0.6);
            border: 2px solid rgba(100, 181, 246, 0.5);
            border-radius: 10px;
            min-height: 200px;
            height: auto;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            padding: 15px;
            touch-action: manipulation;
        }

        .ninja-room:hover {
            border-color: #64b5f6;
            box-shadow: 0 0 20px rgba(100, 181, 246, 0.5);
            transform: scale(1.05);
        }

        .ninja-silhouette {
            opacity: 0;
            width: 100%;
            height: 100%;
            transition: opacity 0.5s ease;
            animation: silhouetteFade 2s ease-in-out infinite;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .ninja-silhouette img {
            opacity: 0;
            transition: opacity 0.5s ease;
        }

        .ninja-silhouette.visible {
            opacity: 0.3;
        }

        .ninja-silhouette.highly-visible {
            opacity: 0.7;
        }

        .ninja-silhouette.fully-visible {
            opacity: 1;
            animation: none;
        }

        @keyframes silhouetteFade {
            0%, 100% { opacity: 0; }
            50% { opacity: 0.1; }
        }

        .visibility-hint {
            font-size: 14px;
            color: #aaa;
            margin-top: 10px;
        }

        /* ===== LAB DIMENSION ===== */
        .lab-bg {
            background: linear-gradient(135deg, #00aa44 0%, #00cc66 50%, #00aa44 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 20px;
            flex-wrap: wrap;
            padding: 20px;
            position: relative;
        }

        .scientist-santa-container {
            position: absolute;
            right: 20px;
            top: 50%;
            transform: translateY(-50%);
            width: 140px;
            height: 180px;
        }

        .toy-item {
            background: rgba(255, 255, 255, 0.9);
            border-radius: 10px;
            padding: 15px;
            min-width: 150px;
            text-align: center;
            box-shadow: 0 0 15px rgba(0, 0, 0, 0.3);
            transition: all 0.3s ease;
        }

        .toy-icon {
            font-size: 60px;
            margin: 10px 0;
        }

        .feature-list {
            text-align: left;
            margin: 15px 0;
            font-size: 12px;
            color: #333;
        }

        .feature {
            padding: 5px;
            margin: 3px 0;
            background: rgba(0, 0, 0, 0.1);
            border-radius: 3px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .feature-toggle {
            width: 20px;
            height: 20px;
            border: 2px solid #cc0000;
            border-radius: 3px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            font-size: 12px;
        }

        .feature-toggle:hover {
            background: rgba(204, 0, 0, 0.3);
        }

        .feature-toggle.removed {
            background: rgba(0, 204, 0, 0.5);
            border-color: #00cc00;
        }

        .feature-toggle.removed::after {
            content: '‚úì';
            color: #00cc00;
            font-weight: bold;
        }

        /* ===== FINALE SCENE ===== */
        .finale-scene {
            background: linear-gradient(180deg, #001a4d 0%, #003d7a 50%, #0f3460 100%);
            justify-content: center;
            align-items: center;
        }

        .home-setting {
            width: 100%;
            max-width: 800px;
            height: 400px;
            background: linear-gradient(135deg, #8b4513 0%, #a0522d 100%);
            border-radius: 30px;
            position: relative;
            margin-bottom: 40px;
            box-shadow: 0 0 40px rgba(100, 181, 246, 0.5);
            overflow: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .fireplace {
            position: absolute;
            width: 200px;
            height: 200px;
            background: linear-gradient(135deg, #333 0%, #000 100%);
            left: 50%;
            transform: translateX(-50%);
            border: 10px solid #8b4513;
            border-radius: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 80px;
            animation: fireGlow 1s ease-in-out infinite;
        }

        @keyframes fireGlow {
            0%, 100% { box-shadow: 0 0 30px rgba(255, 100, 0, 0.5); }
            50% { box-shadow: 0 0 50px rgba(255, 150, 0, 0.7); }
        }

        .nana-character {
            position: absolute;
            width: 100px;
            height: 150px;
            left: 20%;
            bottom: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 0 20px rgba(218, 165, 32, 0.6);
        }

        .grandpa-character {
            position: absolute;
            width: 100px;
            height: 150px;
            left: 50%;
            bottom: 30px;
            transform: translateX(-50%);
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 0 20px rgba(139, 69, 19, 0.6);
        }

        .hannah-margot {
            position: absolute;
            display: flex;
            gap: 20px;
            right: 20%;
            bottom: 30px;
        }

        .girl {
            width: 80px;
            height: 140px;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 0 15px rgba(100, 181, 246, 0.5);
        }

        .hannah {
            background: linear-gradient(135deg, #ff69b4 0%, #ff1493 100%);
        }

        .margot {
            background: linear-gradient(135deg, #ba55d3 0%, #663399 100%);
        }

        .nana-story {
            background: rgba(30, 40, 80, 0.95);
            border: 3px solid #ffd700;
            border-radius: 20px;
            padding: 40px;
            max-width: 700px;
            font-size: 18px;
            text-align: center;
            margin-top: 40px;
            animation: slideUp 1s ease-out;
            box-shadow: 0 0 30px rgba(255, 215, 0, 0.5);
        }

        .nana-story h3 {
            color: #ffd700;
            font-size: 28px;
            margin-bottom: 20px;
        }

        .nana-story p {
            margin: 15px 0;
            line-height: 1.8;
        }

        /* ===== BUTTONS ===== */
        .button-group {
            display: flex;
            gap: 15px;
            margin-top: 30px;
            flex-wrap: wrap;
            justify-content: center;
        }

        .btn {
            padding: 15px 30px;
            font-size: 16px;
            font-weight: bold;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            box-shadow: 0 0 15px rgba(100, 181, 246, 0.5);
        }

        .btn-primary {
            background: linear-gradient(135deg, #64b5f6 0%, #2196f3 100%);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-3px);
            box-shadow: 0 0 25px rgba(100, 181, 246, 0.8);
        }

        .btn-primary:active {
            transform: translateY(-1px);
        }

        .btn-secondary {
            background: linear-gradient(135deg, #ffd700 0%, #ffb700 100%);
            color: #000;
        }

        .btn-secondary:hover {
            transform: translateY(-3px);
            box-shadow: 0 0 25px rgba(255, 215, 0, 0.8);
        }

        /* ===== PROGRESS TRACKER ===== */
        .progress-tracker {
            position: fixed;
            top: 20px;
            right: 20px;
            background: rgba(30, 40, 80, 0.9);
            border: 2px solid #64b5f6;
            border-radius: 10px;
            padding: 15px 20px;
            font-size: 14px;
            z-index: 100;
            box-shadow: 0 0 15px rgba(100, 181, 246, 0.5);
        }

        .progress-item {
            margin: 8px 0;
            display: flex;
            align-items: center;
            gap: 10px;
            cursor: pointer;
            padding: 5px;
            border-radius: 5px;
            transition: all 0.3s ease;
        }

        .progress-item:hover {
            background: rgba(100, 181, 246, 0.2);
            transform: translateX(5px);
        }

        .progress-item.completed {
            opacity: 0.5;
        }

        .progress-item.completed:hover {
            opacity: 0.8;
        }

        .progress-checkmark {
            width: 20px;
            height: 20px;
            border: 2px solid #64b5f6;
            border-radius: 3px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .progress-item.completed .progress-checkmark {
            background: #64b5f6;
            border-color: #64b5f6;
        }

        .progress-item.completed .progress-checkmark::after {
            content: '‚úì';
            color: white;
            font-weight: bold;
            font-size: 12px;
        }

        /* ===== RESPONSIVE ===== */
        /* Landscape orientation for mobile */
        @media (max-width: 1024px) and (orientation: landscape) {
            .progress-tracker {
                top: 10px;
                right: 10px;
                padding: 10px 15px;
                font-size: 12px;
                max-width: 200px;
            }

            .progress-item {
                padding: 5px;
                margin: 5px 0;
                font-size: 11px;
            }

            .sleigh {
                width: 180px;
                height: 70px;
            }

            .sleigh-santa {
                width: 115px;
                height: 135px;
            }

            .hallway {
                height: 300px;
            }
        }

        @media (max-width: 768px) {
            .dimension-title {
                font-size: 32px;
            }

            .dialogue-box {
                max-width: 90%;
                padding: 15px;
                font-size: 16px;
            }

            .ninja-bg {
                grid-template-columns: repeat(2, 1fr);
                gap: 12px;
                padding: 15px;
                max-height: calc(100vh - 250px);
            }

            .ninja-room {
                min-height: 180px;
                padding: 12px;
            }

            .progress-tracker {
                top: 10px;
                right: 10px;
                padding: 10px 15px;
                font-size: 12px;
                max-width: calc(100vw - 20px);
            }

            /* In landscape mode on mobile, ensure sleigh is visible and tracker doesn't block */
            @media (orientation: landscape) {
                .progress-tracker {
                    max-width: 180px;
                    font-size: 11px;
                }

                .sleigh {
                    width: 150px;
                    height: 60px;
                    z-index: 10;
                }

                .sleigh-santa {
                    width: 105px;
                    height: 125px;
                }

                .hallway {
                    height: 250px;
                }
            }

            .progress-item {
                padding: 8px 5px;
                min-height: 44px;
            }

            .nana-story {
                padding: 25px;
                max-width: 90%;
                font-size: 16px;
            }

            .sleigh-santa {
                width: 105px;
                height: 125px;
            }

            .bureaucrat-santa {
                width: 140px;
                height: 180px;
            }

            .scientist-santa-container {
                width: 105px;
                height: 140px;
                right: 10px;
            }

            .nana-character {
                width: 80px;
                height: 120px;
            }

            .grandpa-character {
                width: 80px;
                height: 120px;
            }

            .girl {
                width: 60px;
                height: 110px;
            }
        }

        @media (max-width: 480px) {
            .ninja-bg {
                grid-template-columns: 1fr;
                gap: 10px;
                padding: 10px;
                max-height: calc(100vh - 200px);
            }

            .ninja-room {
                min-height: 180px;
                padding: 15px;
            }

            .ninja-room .character-container {
                width: 70px !important;
                height: 90px !important;
            }

            .visibility-hint {
                font-size: 12px;
                margin-top: 8px;
                text-align: center;
            }

            .dimension-bg {
                height: 200px;
            }

            .dimension-title {
                font-size: 24px;
            }

            .btn {
                padding: 12px 20px;
                font-size: 14px;
            }

            .sleigh-santa {
                width: 80px;
                height: 100px;
            }

            .bureaucrat-santa {
                width: 115px;
                height: 160px;
            }

            .scientist-santa-container {
                position: relative;
                right: auto;
                top: auto;
                transform: none;
                width: 95px;
                height: 115px;
                margin: 10px auto;
            }

            .nana-character {
                width: 60px;
                height: 90px;
                left: 10%;
            }

            .grandpa-character {
                width: 60px;
                height: 90px;
                left: 50%;
                transform: translateX(-50%);
            }

            .girl {
                width: 50px;
                height: 90px;
            }

            .dialogue-characters {
                gap: 10px;
            }

            .dialogue-characters .parent-silhouette {
                width: 30px !important;
                height: 45px !important;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- OPENING SCENE -->
        <div class="scene active" id="opening-scene">
            <div class="hallway">
                <div class="sleigh">
                    <div class="sleigh-santa prime-santa">
                        <img class="character-svg" src="https://user-gen-media-assets.s3.amazonaws.com/seedream_images/7d1702b8-64fd-4287-9368-001e4b3c3132.png" alt="Prime Santa" style="width: 100%; height: 100%; object-fit: contain;">
                    </div>
                </div>
                <div class="router-device"></div>
            </div>
            <div class="dialogue-box">
                <div class="character-name">Santa (frantic):</div>
                "Oh no! Oh dear! The Reality Router has gone haywire! Santas from every dimension are appearing everywhere! I need help!"
            </div>
            <div class="dialogue-box">
                <div class="character-name">Hannah & Margot:</div>
                <div style="display: flex; justify-content: center; gap: 20px; margin: 15px 0;">
                    <div class="character-container hannah-character" style="width: 60px; height: 80px;">
                        <svg class="character-svg" viewBox="0 0 60 80" xmlns="http://www.w3.org/2000/svg">
                            <!-- Hair -->
                            <path d="M 20 15 Q 15 10, 10 15 Q 15 20, 20 15 Q 25 20, 30 15 Q 35 20, 40 15 Q 45 20, 50 15 Q 45 10, 40 15" fill="#ff69b4"/>
                            <ellipse cx="30" cy="25" rx="15" ry="18" fill="#ff69b4"/>
                            <!-- Head -->
                            <circle cx="30" cy="30" r="12" fill="#ffdbac"/>
                            <!-- Eyes -->
                            <circle cx="26" cy="28" r="1.5" fill="#000"/>
                            <circle cx="34" cy="28" r="1.5" fill="#000"/>
                            <!-- Smile -->
                            <path d="M 24 32 Q 30 35, 36 32" stroke="#000" stroke-width="1" fill="none"/>
                            <!-- Body -->
                            <ellipse class="girl-body" cx="30" cy="55" rx="12" ry="18" fill="#ff69b4"/>
                            <!-- Arms -->
                            <ellipse class="girl-arm" cx="18" cy="50" rx="4" ry="12" fill="#ffdbac" transform="rotate(-20 18 50)"/>
                            <ellipse class="girl-arm" cx="42" cy="50" rx="4" ry="12" fill="#ffdbac" transform="rotate(20 42 50)"/>
                        </svg>
                    </div>
                    <div class="character-container margot-character" style="width: 60px; height: 80px;">
                        <svg class="character-svg" viewBox="0 0 60 80" xmlns="http://www.w3.org/2000/svg">
                            <!-- Hair -->
                            <path d="M 20 15 Q 15 10, 10 15 Q 15 20, 20 15 Q 25 20, 30 15 Q 35 20, 40 15 Q 45 20, 50 15 Q 45 10, 40 15" fill="#663399"/>
                            <ellipse cx="30" cy="25" rx="15" ry="18" fill="#663399"/>
                            <!-- Head -->
                            <circle cx="30" cy="30" r="12" fill="#ffdbac"/>
                            <!-- Eyes -->
                            <circle cx="26" cy="28" r="1.5" fill="#000"/>
                            <circle cx="34" cy="28" r="1.5" fill="#000"/>
                            <!-- Smile -->
                            <path d="M 24 32 Q 30 35, 36 32" stroke="#000" stroke-width="1" fill="none"/>
                            <!-- Body -->
                            <ellipse class="girl-body" cx="30" cy="55" rx="12" ry="18" fill="#663399"/>
                            <!-- Arms -->
                            <ellipse class="girl-arm" cx="18" cy="50" rx="4" ry="12" fill="#ffdbac" transform="rotate(-20 18 50)"/>
                            <ellipse class="girl-arm" cx="42" cy="50" rx="4" ry="12" fill="#ffdbac" transform="rotate(20 42 50)"/>
                        </svg>
                    </div>
                </div>
                "We can see the glitch! We'll help you, Santa!"
            </div>
            <div class="button-group">
                <button class="btn btn-primary" onclick="startMission()">Let's Fix This! ‚Üí</button>
            </div>
        </div>

        <!-- BUREAUCRACY DIMENSION -->
        <div class="scene" id="bureaucracy-scene">
            <div class="dimension-title">üìã Bureaucracy Dimension üìã</div>
            <div class="dimension-bg bureaucracy-bg">
                <div class="form-stack"></div>
                <div class="bureaucrat-santa">
                    <div class="character-container bureaucrat-santa-svg" style="width: 170px; height: 220px;">
                        <img class="character-svg" src="https://user-gen-media-assets.s3.amazonaws.com/seedream_images/319b024e-be6b-4953-a22c-ab51696b243a.png" alt="Bureaucratic Santa" style="width: 100%; height: 100%; object-fit: contain;">
                    </div>
                </div>
            </div>
            <div class="dialogue-box">
                <div class="character-name">Scott & Megan:</div>
                <div class="dialogue-characters">
                    <div class="character-container parent-silhouette parent-male" style="width: 40px; height: 60px;">
                        <svg class="character-svg" viewBox="0 0 40 60" xmlns="http://www.w3.org/2000/svg">
                            <!-- Head -->
                            <circle class="parent-head" cx="20" cy="12" r="8" fill="#4a5568"/>
                            <!-- Short hair/cap -->
                            <ellipse cx="20" cy="10" rx="9" ry="4" fill="#2d3748"/>
                            <!-- Broader shoulders -->
                            <rect x="12" y="20" width="16" height="4" rx="2" fill="#4a5568"/>
                            <!-- Rectangular torso -->
                            <rect x="13" y="24" width="14" height="20" rx="2" fill="#4a5568"/>
                        </svg>
                    </div>
                    <div class="character-container parent-silhouette parent-female" style="width: 40px; height: 60px;">
                        <svg class="character-svg" viewBox="0 0 40 60" xmlns="http://www.w3.org/2000/svg">
                            <!-- Head -->
                            <circle class="parent-head" cx="20" cy="12" r="8" fill="#4a5568"/>
                            <!-- Longer hair -->
                            <path d="M 11 12 Q 11 8, 15 10 Q 20 8, 25 10 Q 29 8, 29 12 Q 29 18, 25 20 Q 20 22, 15 20 Q 11 18, 11 12" fill="#2d3748"/>
                            <ellipse cx="20" cy="18" rx="7" ry="6" fill="#2d3748"/>
                            <!-- Narrower shoulders -->
                            <rect x="14" y="20" width="12" height="3" rx="1.5" fill="#4a5568"/>
                            <!-- Curved hourglass torso -->
                            <path d="M 14 23 Q 14 28, 18 32 Q 20 35, 18 38 Q 14 42, 14 44 L 26 44 Q 26 42, 22 38 Q 20 35, 22 32 Q 26 28, 26 23 Z" fill="#4a5568"/>
                        </svg>
                    </div>
                </div>
                "This Santa has organized Christmas into forms! We need to find the joy gifts hidden in all these approvals!"
            </div>
            <div class="task-board">
                <div class="task-item" onclick="completeTask(this, 'bureaucracy')">
                    <span>‚ùå 47-Page Gift Approval Process</span>
                    <div class="checkbox"></div>
                </div>
                <div class="task-item" onclick="completeTask(this, 'bureaucracy')">
                    <span>‚ùå "Permission to Be Merry" Form</span>
                    <div class="checkbox"></div>
                </div>
                <div class="task-item" onclick="completeTask(this, 'bureaucracy')">
                    <span>‚ùå Surprise Gift Registry (Violation)</span>
                    <div class="checkbox"></div>
                </div>
                <div class="task-item" onclick="completeTask(this, 'bureaucracy')">
                    <span>‚ùå "Fun Delivery" Override Switch</span>
                    <div class="checkbox"></div>
                </div>
            </div>
            <div class="button-group">
                <button class="btn btn-secondary" onclick="checkBureaucracyComplete()">All Forms Cleared! ‚Üí</button>
                <button class="btn btn-primary" onclick="skipScene('ninja-scene')">Skip to Next Dimension</button>
            </div>
        </div>

        <!-- NINJA DIMENSION -->
        <div class="scene" id="ninja-scene">
            <div class="dimension-title">ü•∑ Stealth Ninja Dimension ü•∑</div>
            <div class="dialogue-box">
                <div class="character-name">Sean & Nikki:</div>
                <div class="dialogue-characters">
                    <div class="character-container parent-silhouette parent-male" style="width: 40px; height: 60px;">
                        <svg class="character-svg" viewBox="0 0 40 60" xmlns="http://www.w3.org/2000/svg">
                            <!-- Head -->
                            <circle class="parent-head" cx="20" cy="12" r="8" fill="#4a5568"/>
                            <!-- Short hair/cap -->
                            <ellipse cx="20" cy="10" rx="9" ry="4" fill="#2d3748"/>
                            <!-- Broader shoulders -->
                            <rect x="12" y="20" width="16" height="4" rx="2" fill="#4a5568"/>
                            <!-- Rectangular torso -->
                            <rect x="13" y="24" width="14" height="20" rx="2" fill="#4a5568"/>
                        </svg>
                    </div>
                    <div class="character-container parent-silhouette parent-female" style="width: 40px; height: 60px;">
                        <svg class="character-svg" viewBox="0 0 40 60" xmlns="http://www.w3.org/2000/svg">
                            <!-- Head -->
                            <circle class="parent-head" cx="20" cy="12" r="8" fill="#4a5568"/>
                            <!-- Longer hair -->
                            <path d="M 11 12 Q 11 8, 15 10 Q 20 8, 25 10 Q 29 8, 29 12 Q 29 18, 25 20 Q 20 22, 15 20 Q 11 18, 11 12" fill="#2d3748"/>
                            <ellipse cx="20" cy="18" rx="7" ry="6" fill="#2d3748"/>
                            <!-- Narrower shoulders -->
                            <rect x="14" y="20" width="12" height="3" rx="1.5" fill="#4a5568"/>
                            <!-- Curved hourglass torso -->
                            <path d="M 14 23 Q 14 28, 18 32 Q 20 35, 18 38 Q 14 42, 14 44 L 26 44 Q 26 42, 22 38 Q 20 35, 22 32 Q 26 28, 26 23 Z" fill="#4a5568"/>
                        </svg>
                    </div>
                </div>
                "Santa became invisible! He's so quiet now we can't even find him. Let's click to reveal him in each room!"
            </div>
            <div class="dimension-bg ninja-bg">
                <div class="ninja-room" onclick="revealNinja(this)">
                    <div class="ninja-silhouette">
                        <div class="character-container ninja-santa-svg" style="width: 95px; height: 115px;">
                            <img class="character-svg" src="https://user-gen-media-assets.s3.amazonaws.com/seedream_images/41bcc0e3-c799-4146-94dd-67cd9702b535.png" alt="Stealth Ninja Santa" style="width: 100%; height: 100%; object-fit: contain;">
                        </div>
                    </div>
                    <div class="visibility-hint">Click to reveal...</div>
                </div>
                <div class="ninja-room" onclick="revealNinja(this)">
                    <div class="ninja-silhouette">
                        <div class="character-container ninja-santa-svg" style="width: 95px; height: 115px;">
                            <img class="character-svg" src="https://user-gen-media-assets.s3.amazonaws.com/seedream_images/41bcc0e3-c799-4146-94dd-67cd9702b535.png" alt="Stealth Ninja Santa" style="width: 100%; height: 100%; object-fit: contain;">
                        </div>
                    </div>
                    <div class="visibility-hint">Click to reveal...</div>
                </div>
                <div class="ninja-room" onclick="revealNinja(this)">
                    <div class="ninja-silhouette">
                        <div class="character-container ninja-santa-svg" style="width: 95px; height: 115px;">
                            <img class="character-svg" src="https://user-gen-media-assets.s3.amazonaws.com/seedream_images/41bcc0e3-c799-4146-94dd-67cd9702b535.png" alt="Stealth Ninja Santa" style="width: 100%; height: 100%; object-fit: contain;">
                        </div>
                    </div>
                    <div class="visibility-hint">Click to reveal...</div>
                </div>
                <div class="ninja-room" onclick="revealNinja(this)">
                    <div class="ninja-silhouette">
                        <div class="character-container ninja-santa-svg" style="width: 95px; height: 115px;">
                            <img class="character-svg" src="https://user-gen-media-assets.s3.amazonaws.com/seedream_images/41bcc0e3-c799-4146-94dd-67cd9702b535.png" alt="Stealth Ninja Santa" style="width: 100%; height: 100%; object-fit: contain;">
                        </div>
                    </div>
                    <div class="visibility-hint">Click to reveal...</div>
                </div>
                <div class="ninja-room" onclick="revealNinja(this)">
                    <div class="ninja-silhouette">
                        <div class="character-container ninja-santa-svg" style="width: 95px; height: 115px;">
                            <img class="character-svg" src="https://user-gen-media-assets.s3.amazonaws.com/seedream_images/41bcc0e3-c799-4146-94dd-67cd9702b535.png" alt="Stealth Ninja Santa" style="width: 100%; height: 100%; object-fit: contain;">
                        </div>
                    </div>
                    <div class="visibility-hint">Click to reveal...</div>
                </div>
                <div class="ninja-room" onclick="revealNinja(this)">
                    <div class="ninja-silhouette">
                        <div class="character-container ninja-santa-svg" style="width: 95px; height: 115px;">
                            <img class="character-svg" src="https://user-gen-media-assets.s3.amazonaws.com/seedream_images/41bcc0e3-c799-4146-94dd-67cd9702b535.png" alt="Stealth Ninja Santa" style="width: 100%; height: 100%; object-fit: contain;">
                        </div>
                    </div>
                    <div class="visibility-hint">Click to reveal...</div>
                </div>
            </div>
            <div class="button-group">
                <button class="btn btn-secondary" onclick="checkNinjaComplete()">All Santas Revealed! ‚Üí</button>
                <button class="btn btn-primary" onclick="skipScene('lab-scene')">Skip to Next Dimension</button>
            </div>
        </div>

        <!-- LAB DIMENSION -->
        <div class="scene" id="lab-scene">
            <div class="dimension-title">üî¨ Mad Scientist Lab Dimension üî¨</div>
            <div class="dimension-bg lab-bg">
                <div class="scientist-santa-container">
                    <div class="character-container scientist-santa" style="width: 140px; height: 180px;">
                        <img class="character-svg" src="https://user-gen-media-assets.s3.amazonaws.com/seedream_images/240d42e3-0ea8-4c30-98b4-fc1379ff68f9.png" alt="Mad Scientist Santa" style="width: 100%; height: 100%; object-fit: contain;">
                    </div>
                </div>
                <div class="toy-item">
                    <div class="toy-icon">üß∏</div>
                    <strong>Teddy Bear</strong>
                    <div class="feature-list">
                        <div class="feature">
                            <span>Sensors: 47</span>
                            <div class="feature-toggle" onclick="removeFeature(this, 'lab')">‚úï</div>
                        </div>
                        <div class="feature">
                            <span>Wi-Fi Module</span>
                            <div class="feature-toggle" onclick="removeFeature(this, 'lab')">‚úï</div>
                        </div>
                        <div class="feature">
                            <span>AI Processing</span>
                            <div class="feature-toggle" onclick="removeFeature(this, 'lab')">‚úï</div>
                        </div>
                        <div class="feature">
                            <span>Softness</span>
                            <div class="feature-toggle" onclick="removeFeature(this, 'lab')">‚úï</div>
                        </div>
                    </div>
                </div>
                <div class="toy-item">
                    <div class="toy-icon">üöÇ</div>
                    <strong>Train Set</strong>
                    <div class="feature-list">
                        <div class="feature">
                            <span>GPS Tracking</span>
                            <div class="feature-toggle" onclick="removeFeature(this, 'lab')">‚úï</div>
                        </div>
                        <div class="feature">
                            <span>5G Connectivity</span>
                            <div class="feature-toggle" onclick="removeFeature(this, 'lab')">‚úï</div>
                        </div>
                        <div class="feature">
                            <span>Blockchain Ledger</span>
                            <div class="feature-toggle" onclick="removeFeature(this, 'lab')">‚úï</div>
                        </div>
                        <div class="feature">
                            <span>Fun Factor</span>
                            <div class="feature-toggle" onclick="removeFeature(this, 'lab')">‚úï</div>
                        </div>
                    </div>
                </div>
                <div class="toy-item">
                    <div class="toy-icon">ü™Ä</div>
                    <strong>Yo-Yo</strong>
                    <div class="feature-list">
                        <div class="feature">
                            <span>Predictive Analytics</span>
                            <div class="feature-toggle" onclick="removeFeature(this, 'lab')">‚úï</div>
                        </div>
                        <div class="feature">
                            <span>Quantum Spin</span>
                            <div class="feature-toggle" onclick="removeFeature(this, 'lab')">‚úï</div>
                        </div>
                        <div class="feature">
                            <span>Simplicity</span>
                            <div class="feature-toggle" onclick="removeFeature(this, 'lab')">‚úï</div>
                        </div>
                        <div class="feature">
                            <span>Joy Multiplier</span>
                            <div class="feature-toggle" onclick="removeFeature(this, 'lab')">‚úï</div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="dialogue-box">
                <div class="character-name">Shanna & Jeremiah:</div>
                <div class="dialogue-characters">
                    <div class="character-container parent-silhouette parent-female" style="width: 40px; height: 60px;">
                        <svg class="character-svg" viewBox="0 0 40 60" xmlns="http://www.w3.org/2000/svg">
                            <!-- Head -->
                            <circle class="parent-head" cx="20" cy="12" r="8" fill="#4a5568"/>
                            <!-- Longer hair -->
                            <path d="M 11 12 Q 11 8, 15 10 Q 20 8, 25 10 Q 29 8, 29 12 Q 29 18, 25 20 Q 20 22, 15 20 Q 11 18, 11 12" fill="#2d3748"/>
                            <ellipse cx="20" cy="18" rx="7" ry="6" fill="#2d3748"/>
                            <!-- Narrower shoulders -->
                            <rect x="14" y="20" width="12" height="3" rx="1.5" fill="#4a5568"/>
                            <!-- Curved hourglass torso -->
                            <path d="M 14 23 Q 14 28, 18 32 Q 20 35, 18 38 Q 14 42, 14 44 L 26 44 Q 26 42, 22 38 Q 20 35, 22 32 Q 26 28, 26 23 Z" fill="#4a5568"/>
                        </svg>
                    </div>
                    <div class="character-container parent-silhouette parent-male" style="width: 40px; height: 60px;">
                        <svg class="character-svg" viewBox="0 0 40 60" xmlns="http://www.w3.org/2000/svg">
                            <!-- Head -->
                            <circle class="parent-head" cx="20" cy="12" r="8" fill="#4a5568"/>
                            <!-- Short hair/cap -->
                            <ellipse cx="20" cy="10" rx="9" ry="4" fill="#2d3748"/>
                            <!-- Broader shoulders -->
                            <rect x="12" y="20" width="16" height="4" rx="2" fill="#4a5568"/>
                            <!-- Rectangular torso -->
                            <rect x="13" y="24" width="14" height="20" rx="2" fill="#4a5568"/>
                        </svg>
                    </div>
                </div>
                "These toys have too much tech! Click the X on excessive features to restore the magic of simplicity!"
            </div>
            <div class="button-group">
                <button class="btn btn-secondary" onclick="checkLabComplete()">Toys Restored! ‚Üí</button>
                <button class="btn btn-primary" onclick="skipScene('finale-scene')">Skip to Finale</button>
            </div>
        </div>

        <!-- FINALE SCENE -->
        <div class="scene" id="finale-scene">
            <div class="dimension-title">‚ú® Welcome Home ‚ú®</div>
            <div class="home-setting">
                <div class="fireplace">üî•</div>
                <div class="nana-character">
                    <div class="character-container nana-svg" style="width: 100px; height: 150px;">
                        <svg class="character-svg" viewBox="0 0 100 150" xmlns="http://www.w3.org/2000/svg">
                            <!-- Hair -->
                            <ellipse cx="50" cy="25" rx="30" ry="20" fill="#daa520"/>
                            <path d="M 20 25 Q 15 20, 15 30 Q 20 35, 25 30 Q 30 35, 35 30 Q 40 35, 45 30 Q 50 35, 55 30 Q 60 35, 65 30 Q 70 35, 75 30 Q 80 35, 85 30 Q 85 20, 80 25" fill="#daa520"/>
                            <!-- Head -->
                            <circle cx="50" cy="40" r="18" fill="#ffdbac"/>
                            <!-- Glasses -->
                            <circle cx="42" cy="38" r="6" fill="none" stroke="#333" stroke-width="1.5"/>
                            <circle cx="58" cy="38" r="6" fill="none" stroke="#333" stroke-width="1.5"/>
                            <line x1="48" y1="38" x2="52" y2="38" stroke="#333" stroke-width="1.5"/>
                            <!-- Eyes -->
                            <circle cx="42" cy="38" r="2" fill="#000"/>
                            <circle cx="58" cy="38" r="2" fill="#000"/>
                            <!-- Smile -->
                            <path d="M 40 45 Q 50 50, 60 45" stroke="#000" stroke-width="1.5" fill="none"/>
                            <!-- Body -->
                            <ellipse class="nana-body" cx="50" cy="100" rx="28" ry="40" fill="#cd853f"/>
                            <!-- Arms -->
                            <ellipse cx="25" cy="95" rx="6" ry="20" fill="#ffdbac" transform="rotate(-15 25 95)"/>
                            <ellipse cx="75" cy="95" rx="6" ry="20" fill="#ffdbac" transform="rotate(15 75 95)"/>
                        </svg>
                    </div>
                </div>
                <div class="grandpa-character">
                    <div class="character-container grandpa-svg" style="width: 100px; height: 150px;">
                        <svg class="character-svg" viewBox="0 0 100 150" xmlns="http://www.w3.org/2000/svg">
                            <!-- Hat -->
                            <ellipse cx="50" cy="20" rx="28" ry="12" fill="#8b4513"/>
                            <rect x="42" y="20" width="16" height="22" fill="#8b4513"/>
                            <!-- Head -->
                            <circle cx="50" cy="40" r="18" fill="#ffdbac"/>
                            <!-- Glasses -->
                            <circle cx="42" cy="38" r="6" fill="none" stroke="#333" stroke-width="1.5"/>
                            <circle cx="58" cy="38" r="6" fill="none" stroke="#333" stroke-width="1.5"/>
                            <line x1="48" y1="38" x2="52" y2="38" stroke="#333" stroke-width="1.5"/>
                            <!-- Eyes -->
                            <circle cx="42" cy="38" r="2" fill="#000"/>
                            <circle cx="58" cy="38" r="2" fill="#000"/>
                            <!-- Beard -->
                            <ellipse cx="50" cy="55" rx="18" ry="25" fill="#fff"/>
                            <path d="M 32 55 Q 32 50, 40 52 Q 50 50, 60 52 Q 68 50, 68 55 Q 68 70, 60 75 Q 50 78, 40 75 Q 32 70, 32 55" fill="#fff"/>
                            <!-- Mustache -->
                            <ellipse cx="50" cy="48" rx="12" ry="4" fill="#fff"/>
                            <!-- Smile -->
                            <path d="M 40 62 Q 50 65, 60 62" stroke="#000" stroke-width="1.5" fill="none"/>
                            <!-- Body -->
                            <ellipse class="grandpa-body" cx="50" cy="100" rx="28" ry="40" fill="#8b4513"/>
                            <!-- Arms -->
                            <ellipse cx="25" cy="95" rx="6" ry="20" fill="#ffdbac" transform="rotate(-15 25 95)"/>
                            <ellipse cx="75" cy="95" rx="6" ry="20" fill="#ffdbac" transform="rotate(15 75 95)"/>
                        </svg>
                    </div>
                </div>
                <div class="hannah-margot">
                    <div class="girl hannah">
                        <div class="character-container hannah-character" style="width: 80px; height: 140px;">
                            <svg class="character-svg" viewBox="0 0 80 140" xmlns="http://www.w3.org/2000/svg">
                                <!-- Hair -->
                                <path d="M 25 15 Q 20 10, 15 15 Q 20 20, 25 15 Q 30 20, 35 15 Q 40 20, 45 15 Q 50 20, 55 15 Q 50 10, 45 15" fill="#ff69b4"/>
                                <ellipse cx="40" cy="30" rx="18" ry="22" fill="#ff69b4"/>
                                <!-- Head -->
                                <circle cx="40" cy="40" r="15" fill="#ffdbac"/>
                                <!-- Eyes -->
                                <circle cx="35" cy="38" r="2" fill="#000"/>
                                <circle cx="45" cy="38" r="2" fill="#000"/>
                                <!-- Smile -->
                                <path d="M 30 45 Q 40 50, 50 45" stroke="#000" stroke-width="1.5" fill="none"/>
                                <!-- Body -->
                                <ellipse class="girl-body" cx="40" cy="90" rx="15" ry="35" fill="#ff69b4"/>
                                <!-- Arms -->
                                <ellipse class="girl-arm" cx="22" cy="85" rx="5" ry="18" fill="#ffdbac" transform="rotate(-20 22 85)"/>
                                <ellipse class="girl-arm" cx="58" cy="85" rx="5" ry="18" fill="#ffdbac" transform="rotate(20 58 85)"/>
                            </svg>
                        </div>
                    </div>
                    <div class="girl margot">
                        <div class="character-container margot-character" style="width: 80px; height: 140px;">
                            <svg class="character-svg" viewBox="0 0 80 140" xmlns="http://www.w3.org/2000/svg">
                                <!-- Hair -->
                                <path d="M 25 15 Q 20 10, 15 15 Q 20 20, 25 15 Q 30 20, 35 15 Q 40 20, 45 15 Q 50 20, 55 15 Q 50 10, 45 15" fill="#663399"/>
                                <ellipse cx="40" cy="30" rx="18" ry="22" fill="#663399"/>
                                <!-- Head -->
                                <circle cx="40" cy="40" r="15" fill="#ffdbac"/>
                                <!-- Eyes -->
                                <circle cx="35" cy="38" r="2" fill="#000"/>
                                <circle cx="45" cy="38" r="2" fill="#000"/>
                                <!-- Smile -->
                                <path d="M 30 45 Q 40 50, 50 45" stroke="#000" stroke-width="1.5" fill="none"/>
                                <!-- Body -->
                                <ellipse class="girl-body" cx="40" cy="90" rx="15" ry="35" fill="#663399"/>
                                <!-- Arms -->
                                <ellipse class="girl-arm" cx="22" cy="85" rx="5" ry="18" fill="#ffdbac" transform="rotate(-20 22 85)"/>
                                <ellipse class="girl-arm" cx="58" cy="85" rx="5" ry="18" fill="#ffdbac" transform="rotate(20 58 85)"/>
                            </svg>
                        </div>
                    </div>
                </div>
            </div>
            <div class="nana-story">
                <h3>Nana's Christmas Memory</h3>
                <p>
                    "My dears, long ago when your mother was just a little girl like you, the same thing happened to Christmas. Santa had gotten so caught up in making everything perfect and efficient that he forgot the most important thing: <strong>the joy of giving and the warmth of family.</strong>"
                </p>
                <p>
                    "When he remembered that Christmas isn't about forms or speed or fancy technology‚Äîit's about <strong>love, wonder, and the people we care about</strong>‚Äîthe magic returned. And it will always return as long as we remember that truth."
                </p>
                <p>
                    "And that, my dear Hannah and Margot, is why <strong>your belief matters more than anything else.</strong>"
                </p>
            </div>
            <div class="nana-story" style="border-color: #8b4513; box-shadow: 0 0 30px rgba(139, 69, 19, 0.5);">
                <h3 style="color: #8b4513;">Grandpa Scott Jack's Christmas Memory</h3>
                <p>
                    "You know, girls, your Nana is absolutely right. But let me tell you something else I've learned over all these years: <strong>Christmas traditions are the threads that weave our family together.</strong>"
                </p>
                <p>
                    "Every cookie we bake, every story we tell, every moment we share by this fireplace‚Äîthese aren't just things we do. They're <strong>the magic that makes Christmas real.</strong> When we pass these traditions down, we're passing down love itself."
                </p>
                <p>
                    "And remember, <strong>the best gift you can ever give is your time and your heart</strong>‚Äîjust like you did today, helping all those Santas find their way home. That's the true spirit of Christmas, and it lives in you both."
                </p>
            </div>
            <div class="button-group">
                <button class="btn btn-secondary" onclick="viewCredits()">See All the Santas üéÖ</button>
                <button class="btn btn-primary" onclick="resetStory()">Start Over</button>
            </div>
        </div>

        <!-- CREDITS SCENE -->
        <div class="scene" id="credits-scene">
            <div class="dimension-title">üéÑ All the Santas Were Saved! üéÑ</div>
            <div class="task-board" style="max-width: 600px; margin: 40px 0;">
                <h3 style="color: #ffd700; margin-bottom: 20px;">Our Heroes:</h3>
                <div class="task-item">
                    <span>üéÖ Prime Santa - The Real Deal</span>
                    <span style="color: #64b5f6;">‚úì</span>
                </div>
                <div class="task-item">
                    <span>üìã Bureaucrat Santa - Learned to Let Loose</span>
                    <span style="color: #64b5f6;">‚úì</span>
                </div>
                <div class="task-item">
                    <span>ü•∑ Ninja Santa - Remembered to Be Seen</span>
                    <span style="color: #64b5f6;">‚úì</span>
                </div>
                <div class="task-item">
                    <span>üî¨ Mad Scientist Santa - Found Simplicity</span>
                    <span style="color: #64b5f6;">‚úì</span>
                </div>
                <h3 style="color: #ffd700; margin-top: 30px; margin-bottom: 20px;">Our Helpers:</h3>
                <div class="task-item">
                    <span>üëß Hannah & Margot - The Brave Navigators</span>
                    <span style="color: #ffd700;">‚≠ê</span>
                </div>
                <div class="task-item">
                    <span>üë®‚Äçüë©‚Äçüëß‚Äçüë¶ Scott & Megan - Bureaucracy Busters</span>
                    <span style="color: #ffd700;">‚≠ê</span>
                </div>
                <div class="task-item">
                    <span>üë®‚Äçüë©‚Äçüëß Sean & Nikki - Stealth Specialists</span>
                    <span style="color: #ffd700;">‚≠ê</span>
                </div>
                <div class="task-item">
                    <span>üë®‚Äçüë©‚Äçüëß Shanna & Jeremiah - Tech Tamers</span>
                    <span style="color: #ffd700;">‚≠ê</span>
                </div>
                <div class="task-item">
                    <span>üëµ Colleen (Nana) - The Heart of Christmas</span>
                    <span style="color: #ffd700;">‚≠ê</span>
                </div>
                <div class="task-item">
                    <span>üë¥ Scott Jack (Grandpa) - Keeper of Christmas Traditions</span>
                    <span style="color: #ffd700;">‚≠ê</span>
                </div>
            </div>
            <div class="dialogue-box" style="margin-top: 30px;">
                <div class="character-name">Santa:</div>
                "Thank you all! Because of your help, Christmas is saved, and every Santa has returned to his proper dimension‚Äîready to spread joy in his own special way. Now, go get some cookies! You've earned them! üç™"
            </div>
            <div class="button-group">
                <button class="btn btn-primary" onclick="resetStory()">Play Again ‚Üí</button>
            </div>
        </div>
    </div>

    <!-- PROGRESS TRACKER -->
    <div class="progress-tracker">
        <div style="font-weight: bold; color: #ffd700; margin-bottom: 10px;">Mission Progress</div>
        <div class="progress-item" id="prog-bureaucracy" onclick="navigateToDimension('bureaucracy-scene')">
            <div class="progress-checkmark"></div>
            <span>Bureaucracy Fixed</span>
        </div>
        <div class="progress-item" id="prog-ninja" onclick="navigateToDimension('ninja-scene')">
            <div class="progress-checkmark"></div>
            <span>Ninja Revealed</span>
        </div>
        <div class="progress-item" id="prog-lab" onclick="navigateToDimension('lab-scene')">
            <div class="progress-checkmark"></div>
            <span>Lab Restored</span>
        </div>
        <div class="progress-item" id="prog-finale" onclick="navigateToDimension('finale-scene')">
            <div class="progress-checkmark"></div>
            <span>Home Safe</span>
        </div>
    </div>

    <script>
        // State management
        const state = {
            bureaucracyTasks: 0,
            ninjaReveals: 0,
            labFeatures: 0,
            completedDimensions: {
                bureaucracy: false,
                ninja: false,
                lab: false
            }
        };

        // Create snowfall effect
        function createSnowflakes() {
            const snowContainer = document.body;
            for (let i = 0; i < 50; i++) {
                const snow = document.createElement('div');
                snow.className = 'snow';
                snow.style.left = Math.random() * 100 + '%';
                snow.style.top = -10 + 'px';
                snow.style.animationDuration = (Math.random() * 5 + 8) + 's';
                snow.style.animationDelay = Math.random() * 2 + 's';
                snow.style.setProperty('--drift', (Math.random() * 200 - 100) + 'px');
                snowContainer.appendChild(snow);
            }
        }

        // Scene navigation
        function showScene(sceneId) {
            document.querySelectorAll('.scene').forEach(scene => {
                scene.classList.remove('active');
            });
            document.getElementById(sceneId).classList.add('active');
            window.scrollTo(0, 0);
        }

        function startMission() {
            createSparks();
            setTimeout(() => showScene('bureaucracy-scene'), 500);
        }

        function skipScene(sceneId) {
            showScene(sceneId);
        }

        // Spark effect on device
        function createSparks() {
            const router = document.querySelector('.router-device');
            for (let i = 0; i < 12; i++) {
                const spark = document.createElement('div');
                spark.className = 'spark';
                spark.style.left = '50%';
                spark.style.top = '50%';
                spark.style.setProperty('--tx', (Math.cos(i / 12 * Math.PI * 2) * 150) + 'px');
                spark.style.setProperty('--ty', (Math.sin(i / 12 * Math.PI * 2) * 150) + 'px');
                router.appendChild(spark);
                setTimeout(() => spark.remove(), 1000);
            }
        }

        // Bureaucracy dimension tasks
        function completeTask(element, dimension) {
            if (!element.classList.contains('completed')) {
                element.classList.add('completed');
                state.bureaucracyTasks++;
                playSuccessAnimation();
            }
        }

        function checkBureaucracyComplete() {
            if (state.bureaucracyTasks >= 4) {
                state.completedDimensions.bureaucracy = true;
                updateProgress('bureaucracy');
                showScene('ninja-scene');
            } else {
                alert(`Complete all tasks! (${state.bureaucracyTasks}/4)`);
            }
        }

        // Ninja dimension reveals
        function revealNinja(element) {
            const silhouette = element.querySelector('.ninja-silhouette');
            const hint = element.querySelector('.visibility-hint');
            const img = silhouette.querySelector('img');
            
            if (silhouette.classList.contains('fully-visible')) {
                return;
            }
            
            if (!silhouette.classList.contains('visible')) {
                silhouette.classList.add('visible');
                if (img) img.style.opacity = '0.3';
                hint.textContent = 'Keep clicking...';
            } else if (!silhouette.classList.contains('highly-visible')) {
                silhouette.classList.add('highly-visible');
                if (img) img.style.opacity = '0.7';
                hint.textContent = 'Almost there...';
            } else {
                silhouette.classList.add('fully-visible');
                if (img) img.style.opacity = '1';
                hint.textContent = 'Found! üéÖ';
                state.ninjaReveals++;
                playSuccessAnimation();
            }
        }

        function checkNinjaComplete() {
            if (state.ninjaReveals >= 6) {
                state.completedDimensions.ninja = true;
                updateProgress('ninja');
                showScene('lab-scene');
            } else {
                alert(`Reveal all Santas! (${state.ninjaReveals}/6)`);
            }
        }

        // Lab dimension feature removal
        function removeFeature(element, dimension) {
            if (!element.classList.contains('removed')) {
                element.classList.add('removed');
                state.labFeatures++;
                playSuccessAnimation();
            }
        }

        function checkLabComplete() {
            if (state.labFeatures >= 12) {
                state.completedDimensions.lab = true;
                updateProgress('lab');
                showScene('finale-scene');
            } else {
                alert(`Remove all excessive features! (${state.labFeatures}/12)`);
            }
        }

        // Progress tracking
        function updateProgress(dimension) {
            const progressId = `prog-${dimension}`;
            document.getElementById(progressId).classList.add('completed');
        }

        // Navigate to dimension from progress tracker
        function navigateToDimension(sceneId) {
            showScene(sceneId);
        }

        // Success animation
        function playSuccessAnimation() {
            const audio = new Audio('data:audio/wav;base64,UklGRiYAAABXQVZFZm10IBAAAAABAAEAQB8AAAB9AAACABAAZGF0YQIAAAAAAA==');
            audio.play().catch(() => {});
        }

        // Credits
        function viewCredits() {
            showScene('credits-scene');
        }

        function resetStory() {
            state.bureaucracyTasks = 0;
            state.ninjaReveals = 0;
            state.labFeatures = 0;
            state.completedDimensions = {
                bureaucracy: false,
                ninja: false,
                lab: false
            };
            
            document.querySelectorAll('.task-item.completed').forEach(el => el.classList.remove('completed'));
            document.querySelectorAll('.ninja-silhouette').forEach(el => {
                el.classList.remove('visible', 'highly-visible', 'fully-visible');
                const img = el.querySelector('img');
                if (img) img.style.opacity = '0';
            });
            document.querySelectorAll('.feature-toggle.removed').forEach(el => el.classList.remove('removed'));
            document.querySelectorAll('.progress-item').forEach(el => el.classList.remove('completed'));
            
            showScene('opening-scene');
        }

        // Initialize
        createSnowflakes();
        
        // Initialize ninja image opacities
        document.querySelectorAll('.ninja-silhouette img').forEach(img => {
            img.style.opacity = '0';
        });
    </script>
</body>
</html>
